(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{203:function(t,e,r){var content=r(214);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(22).default)("2144c296",content,!1,{sourceMap:!1})},204:function(t,e,r){var content=r(216);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(22).default)("c188a870",content,!1,{sourceMap:!1})},210:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(81);var o=r(85);function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},213:function(t,e,r){"use strict";var n=r(203);r.n(n).a},214:function(t,e,r){(e=r(21)(!1)).push([t.i,"#pagePostEdit form.form-edit{width:100%;margin-bottom:20px}#pagePostEdit h3{margin-bottom:30px}",""]),t.exports=e},215:function(t,e,r){"use strict";var n=r(204);r.n(n).a},216:function(t,e,r){(e=r(21)(!1)).push([t.i,"#pagePost h5{margin-bottom:20px}",""]),t.exports=e},228:function(t,e,r){"use strict";r.r(e);r(26);var n=r(2),o=(r(23),r(13),r(14),r(7),r(19),r(128),r(127),r(6)),c=r(210),l=r(69),d=r(10);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var v={props:["post"],data:function(){return{valid:!0,lazy:!1,title:"",titleRules:[function(t){return!!t||"Título obligatorio"},function(t){return t&&t.length<=60||"El título ha de tener máximoo 60 caractéres"}],descRules:[function(t){return!!t||"Descripción obligatoria"},function(t){return t&&t.length<=150||"La descripción ha de tener máximoo 150 caractéres"}],imageRules:[function(t){return!!t||"Imagen obligatoria"}],newTags:[],search:""}},tags:function(){return[].concat(Object(c.a)(this.post.tags),Object(c.a)(this.newTags))},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(d.b)(["loading","alert","logout"]),{updateTags:function(){var t=this;this.$nextTick((function(){var e;(e=t.post.tags).push.apply(e,Object(c.a)(t.search.split(","))),t.$nextTick((function(){t.search=""}))}))},save:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=19;break}return e.prev=1,t.loading(!0),r=void 0===t.post.id?l.a.createPost:l.a.updatePost,e.next=6,r({post:t.post});case 6:data=e.sent,t.post.id=data.id,t.$forceUpdate(),t.alert("Post guardado correctamente"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t.alert(e.t0.message),401===e.t0.code&&(t.logout(),t.$router.push({path:"/login"}));case 16:return e.prev=16,t.loading(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()},remove:function(){this.alert({width:600,message:"¿Deseas borrar el post?",title:"¡Atención!",acceptText:"¡Borrar!",cancelText:"Cancelar",accept:this.deletePost.bind(this)})},deletePost:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading(!0),e.next=4,l.a.deletePost({id:t.post.id});case 4:t.alert("Post borrado correctamente"),t.$router.push({path:"/"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.alert(e.t0.message);case 11:return e.prev=11,t.loading(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()}})},m=(r(213),r(11)),h={components:{EditPost:Object(m.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{align:"center",id:"pagePostEdit"}},[r("v-form",{ref:"form",staticClass:"form-edit",attrs:{lazy:"true"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("h3",[t._v(t._s(t.post.title||"Crear nuevo post"))]),t._v(" "),r("v-text-field",{attrs:{counter:60,rules:t.titleRules,label:"Título",required:""},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}}),t._v(" "),r("v-text-field",{attrs:{rules:t.descRules,counter:150,label:"Descripción",required:""},model:{value:t.post.description,callback:function(e){t.$set(t.post,"description",e)},expression:"post.description"}}),t._v(" "),r("v-text-field",{attrs:{rules:t.imageRules,label:"Imagen (url)",required:""},model:{value:t.post.image,callback:function(e){t.$set(t.post,"image",e)},expression:"post.image"}}),t._v(" "),r("v-combobox",{staticClass:"tag-input",attrs:{multiple:"",label:"Tags (añade con intro)","append-icon":"",chips:"","deletable-chips":"","search-input":t.search},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.updateTags(e)},paste:t.updateTags},model:{value:t.post.tags,callback:function(e){t.$set(t.post,"tags",e)},expression:"post.tags"}}),t._v(" "),r("client-only",[r("wysiwyg",{attrs:{id:"editorHtml"},model:{value:t.post.text,callback:function(e){t.$set(t.post,"text",e)},expression:"post.text"}})],1)],1),t._v(" "),r("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"green"},on:{click:t.save}},[t._v("\n        Guardar\n    ")]),t._v(" "),r("v-btn",{staticClass:"mr-4",attrs:{color:"blue",to:"/",nuxt:""}},[t._v("\n        Volver\n    ")]),t._v(" "),t.post.id?r("v-btn",{staticClass:"mr-4",attrs:{color:"red"},on:{click:t.remove}},[t._v("\n        Borrar\n    ")]):t._e()],1)}),[],!1,null,null,null).exports},middleware:"auth",asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.params,e.prev=1,"_new"!==r.id){e.next=6;break}e.t0={tags:[]},e.next=9;break;case 6:return e.next=8,l.a.getPost(r.id);case 8:e.t0=e.sent;case 9:return n=e.t0,e.abrupt("return",{post:n,title:n.title||"Nuevo Post",description:n.description?n.description:"Nuevo post"});case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",{post:!1,title:"Error",description:"Error"});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))()},head:function(){return{title:this.title,meta:[{hid:"description",name:"description",content:this.description}]}}},x=(r(215),Object(m.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"pagePost"}},[e("EditPost",{attrs:{post:this.post}})],1)}),[],!1,null,null,null));e.default=x.exports}}]);